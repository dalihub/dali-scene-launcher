CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(dali-model-export C CXX)

SET(dali-model-export_VERSION_MAJOR 1)
SET(dali-model-export_VERSION_MINOR 0)

SET(ROOT_SRC_DIR ${CMAKE_SOURCE_DIR}/..)

SET(PREFIX ${CMAKE_INSTALL_PREFIX})
SET(BINDIR ${PREFIX}/bin)

MESSAGE( STATUS "CMAKE_BUILD_TYPE: " ${CMAKE_BUILD_TYPE} )
if(CMAKE_BUILD_TYPE MATCHES Debug)
    MESSAGE("Setting variable: DEBUG_ENABLED")
    SET(DEBUG_ENABLED "1")
ENDIF()

SET(PKG_LIST assimp )

INCLUDE(FindPkgConfig)
pkg_check_modules(REQUIRED_PKGS REQUIRED ${PKG_LIST})

FOREACH(flag ${REQUIRED_PKGS_CFLAGS})
        SET(REQUIRED_CFLAGS "${REQUIRED_CFLAGS} ${flag}")
ENDFOREACH(flag)

###########################################################################

SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${REQUIRED_CFLAGS} -Werror -Wall -fPIE -std=c++11")
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${CMAKE_C_FLAGS}")

INCLUDE_DIRECTORIES(${ROOT_SRC_DIR}/include)

SET(MODEL_EXPORT_SRC_DIR ${ROOT_SRC_DIR}/src)

AUX_SOURCE_DIRECTORY(${MODEL_EXPORT_SRC_DIR} MODEL_EXPORT_SRCS)

SET(MODEL_EXPORT_SRCS
  ${MODEL_EXPORT_SRCS} ${ROOT_SRC_DIR}/main.cpp
)

ADD_EXECUTABLE(${PROJECT_NAME} ${MODEL_EXPORT_SRCS})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${REQUIRED_PKGS_LDFLAGS} -pie -lassimp)

INSTALL(TARGETS ${PROJECT_NAME} DESTINATION ${BINDIR})

